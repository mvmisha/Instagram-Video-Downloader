<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Instagram Video Downloader</title>

</head>

<body>
    <form>
        <input type="text" id="link" name="link" placeholder="Paste your instagram link" required>
        <button type="button" id="link" onclick="descargar()" download>Download</button>
        <a href="source.mp4" id="download" download hidden>Download video</a>

    </form>

    <script type="application/javascript">
        var link

        function descargar() {
            link = document.getElementById('link').value
            link = link + '/?__a=1'

            var d = new Date();
            var xhttp;
            var urlapi;
            urlapi = link
            xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var objeto = JSON.parse(xhttp.responseText);
                    link = objeto.graphql.shortcode_media.video_url
                    console.log(link)
                    
                    document.getElementById('download').setAttribute('href', link)
                    document.getElementById('download').click();

                }
            };
            xhttp.open("GET", urlapi, true);
            xhttp.send();
        }

    </script>
</body>

</html>
